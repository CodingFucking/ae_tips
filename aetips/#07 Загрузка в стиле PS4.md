# 07. Загрузка в стиле PS4

Всем доброго времени суток, в том числе и новым подписчкикам, которые пришли с других каналов.

![https://miro.medium.com/v2/resize:fit:1400/1*mI6OC1Hv0-NGDbS_0ebggg.jpeg](https://miro.medium.com/v2/resize:fit:1400/1*mI6OC1Hv0-NGDbS_0ebggg.jpeg)

Здесь вы точно найдете, то чего даже не искали,

вот, например, сегодняшняя статья, на неё меня натолкнула как ни странно загрузка на PS4 и я захотел повторить это с помощью AfterEffects.

Рассмотрим что у нас должно получиться и референс анимации.

![То что получится.](https://miro.medium.com/v2/resize:fit:600/0*xgftwapoHbKtKRpJ.gif)

То что получится.

![Референс (КамРип)](https://miro.medium.com/v2/resize:fit:600/0*MCmaf6Wm-8-83wzz.gif)

Референс (КамРип)

## **Задача**

Создать один шейп с анимацией, на котором рандомно будет активна
подгруппа с иконкой кнопки управления.

## **Решение**

Создаём композицию 200x200 px. Назовём её **`“ps4_loading”`**.
Создадим сразу контролирующий слой с шириной строка иконки, назовём
его **`“_ctrl”`** и накинем на него слайдер с таким названием **`“stroke”`**.

Теперь работаем с шейпом.
Создадим шейп и четыре группы (назовём их 01–04) с фигурами, одинаковыми
по размеру (ширина/высота), филлы удалим.

Создаём общий строк ниже вышеперечисленных групп с иконками, к нему прописываем такое выражение:

```jsx
comp(“ps4_loading”).layer(“_ctrl”).effect(“stroke”)(“Slider”)
```

Создадим слайдер контроллер **“random_icon”**, который будет выбирать какую группу включить:

```jsx
fps = 1/thisComp.frameDuration;
T = time/thisComp.frameDuration;
chTime = 3*fps;
seed = Math.floor(T / chTime);//тут задаём изменение каждые 3 секунды
seedRandom(seed,true);
Math.round(random(1,4));//вторая цифра это количество наших иконок
```

В опасити каждой подруппы вставляем выражение, которое будет выбирать какую группу включить:

```jsx
thisNum = 1;//для каждой группы своя цифра
r = effect(“random_icon”)(“Slider”).value;//берём цифру из контроллера рандома
if (r == thisNum) 100 else 0;//если она равна текущему значению, то опасити 100
```

Проанимируем слой по ротойшену и скейлу. Основная часть работы сделана. Теперь дублируем композиции, прекомпим каждую и меняем размер текущей
на 1000x1000.

Создадим ещё пару чекбоксов на слое **“_ctrl”** в названиями**“line_dir”** и **“square_dir”**:В первый это выражение:

```jsx
l = effect(“line_dir”)(“Checkbox”).value;
s = effect(“square_dir”)(“Checkbox”).value;
if (s == 0) l = 1 else 0
```

Во второй это:

```jsx
l = effect(“line_dir”)(“Checkbox”).value;
s = effect(“square_dir”)(“Checkbox”).value;
if (l == 1) s = 0 else 1
```

Эти выражения будут нам давать только один выбранный чекбокс.

И создадим слайдер контроллер с регулировкой растояния между иконками, назовем его **“offset”**.

Вот такое выражения вставляем в позишн каждой композиции:

```jsx
last = parseInt(thisLayer.name.slice(-2));//режем название слоя
if (last === 1) last = last;
else if (last > 1) last -= 1;
l = thisComp.layer(“loading_0” + last);
p0 = l.transform.position.value[0];
p1 = l.transform.position.value[1];
S = thisComp.layer(“_ctrl”).effect(“square_dir”)(“Checkbox”);
offset = thisComp.layer(“_ctrl”).effect(“offset”)(“Slider”);
if (S == 1) [500 — offset, 500 — offset];//( — ,-+,+-,++)
else [p0 + offset, p1];
//(я начал отсчёт с левого верхнего, поэтому для остальных слоёв в предпоследней строчки меняем знаки “+” и “-”, на то что написанно после сплешей)
```

Теперь подвину каждую композицию на 3 фрейма.

![https://miro.medium.com/v2/resize:fit:600/0*9AtqAMo82YSV5vYX.gif](https://miro.medium.com/v2/resize:fit:600/0*9AtqAMo82YSV5vYX.gif)

Одним чекбоксом выстраиваются в ряд.

Вот и всё! Этот принцип можно применить для любого количества иконок, главное всё поменять под свои нужды.

[Вот ссылка на проект CS6.](https://mega.nz/#!caZn2YBQ!MXSEqb8oSPDswYpdkn4TFRYR6y_nwpv-EeWV1-7esvg)

И конечно хотелось бы высказать респект ребятам, которые поддержали меня шэрами и навели на канал практически 300 подписчиков: [Артем Варч](https://t.me/Art_Warch), [Илья Остриков](https://t.me/os3kov).

Eсли вам интересны другие штуки по After Effects и подборки наиполезнейших скриптов, 
то велком [Скептическая рысь](https://t.me/ArtWarch).
Если вы не можете оставаться без новостей о моушен-дизайне, то велком [DizMo](https://t.me/DizMo).

Если вам интересны подобные фишки, то подписывайтесь на https://t.me/ae_tips
