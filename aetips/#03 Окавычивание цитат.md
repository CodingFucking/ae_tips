# 03. Окавычивание цитат

Сегодняшняя статья будет посвящена автоматической вставке кавычек в начале цитаты и в конце.

![https://miro.medium.com/v2/resize:fit:1400/1*-ICFskeAYlvrJ85cR2LA1w.jpeg](https://miro.medium.com/v2/resize:fit:1400/1*-ICFskeAYlvrJ85cR2LA1w.jpeg)

В AE можно два раза кликнуть по слою, выделится весь текст и его можно будет заменить на скопированный ранее. Это меня и натолкнуло на этот сегодняшний типс.

Взглянем на то как обычно происходит этот процесс вставки цитаты:

![https://miro.medium.com/v2/resize:fit:1200/0*D3FPZ2vW6N01vVCY.gif](https://miro.medium.com/v2/resize:fit:1200/0*D3FPZ2vW6N01vVCY.gif)

Сначала выделяем цитату, копируем, выделяем текст в афтере без кавычек и вставляем.
Рассмотрим что у нас должно получиться:

![https://miro.medium.com/v2/resize:fit:1200/0*oQHNhskVOTZ8Dc0I.gif](https://miro.medium.com/v2/resize:fit:1200/0*oQHNhskVOTZ8Dc0I.gif)

Выделяем, копируем, выделяем слой, вставляем.

Первым делом я собрал информацию о возможных (для моего случая) вариантах окончания цитат:

**(.) ⬅️это точка —** она должна быть после закрывающей кавычки.

**(…/?/!)** — они должны быть перед закрывающей кавычкой.

# **Задача**

Ставить открывающую кавычку в начале текста и и закрывающую в конце.
Если в конце цитаты точка, то точку ставим после кавычки, если нет точки, то ставим её так же после. Если (…/?/!) то их оставляем внутри и после них ставим кавычку.

# **Решение**

Создаём текстовый слой с бокс текстом в нужный размер, делаем левый отступ под символ кавычки в размер где-то половины от кегля.

Дальше работаем с сурсом текста. Не большая загвоздка есть только в том, что давным-давно в эпоху динозавров существовал AE CS5.5 и ходят слухи что им ещё кто-то пользуется. Так вот это вовсе не слухи и мы работаем именно на этой версии. А она не воспринимает кириллические символы в экспрешеннах (по крайней мере на маках всё превращается в “?????”). Для того что бы обойти это и указать шаблон поиска для регулярок нам нужно всего лишь преобразовать нужные кириллические символы в юникодовское обозначение:

**`[“\u0430-\u044F\u0410-\u042F\u0451\u0401”]`**

Для нормальных афтеров можно было обойтись следующим шаблоном:

**`[а-яА-ЯёЁ]`**

Дальше задаём условия поиска по шаблонам для разных ситуаций.
Вот такое небольшое выражение получается, тут вроде всё просто:

![Ищем совпадение с шаблоном, заменяем, прибавляем кавычки.](https://miro.medium.com/v2/resize:fit:954/0*YYYHoTxLYACrWgNJ.png)

Ищем совпадение с шаблоном, заменяем, прибавляем кавычки.

[Скачать для CS5.5.](https://gist.github.com/CodingFucking/eb6c6ab5c8fe242403fdb5ea85e28682)

[Скачать для нормальной версии.](https://gist.github.com/CodingFucking/a4af91ac6d4e7f3b02f4b80583505062)

Надеюсь что это поможет хоть чем-то в ваших проектах, если у вас есть схожи задачи. Пускай глобально этот типс и не упрощает работу, но я жду не дождусь когда у меня появится задача вставить больше 100 цитат в текстовые слои, а у меня у меня уже будет на половину готовое решение.


В очередной раз отдельная благодарность за советы и перепосты [Warch](https://t.me/Art_Warch)’у.
Если вам интересны подобные фишки, то подписывайтесь на https://t.me/ae_tips
